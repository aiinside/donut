
import argparse
import numpy as np

DETR_PARAMS = argparse.Namespace()

DETR_PARAMS.num_classes          = 900 # 学習の都合上、クラス数と異なる場合あり
DETR_PARAMS.hidden_dim           = 256
DETR_PARAMS.enc_layers           = 6
DETR_PARAMS.dec_layers           = 6
DETR_PARAMS.position_embedding   = 'sine'
DETR_PARAMS.lr_backbone          = 1e-5 # 予測には関係ないが、build時に参照している
DETR_PARAMS.masks                = False
DETR_PARAMS.backbone             = 'resnet50'
DETR_PARAMS.dilation             = False
DETR_PARAMS.dropout              = 0.1
DETR_PARAMS.nheads               = 8
DETR_PARAMS.dim_feedforward      = 2048
DETR_PARAMS.pre_norm             = False
DETR_PARAMS.num_queries          = 480
DETR_PARAMS.aux_loss             = True
DETR_PARAMS.frozen_weights       = None
DETR_PARAMS.set_cost_class       = 1
DETR_PARAMS.set_cost_bbox        = 5
DETR_PARAMS.set_cost_giou        = 2
DETR_PARAMS.bbox_loss_coef       = 5
DETR_PARAMS.giou_loss_coef       = 2
DETR_PARAMS.mask_loss_coef       = 1
DETR_PARAMS.dice_loss_coef       = 1
DETR_PARAMS.eos_coef             = 0.1


# CROP MODEL PARAMS #
__PYRAMID_LEVELS = [3, 4, 5, 6, 7]
CROP_ANCHOR_PARAMS = {
    'levels': __PYRAMID_LEVELS,
    'strides': [2 ** x for x in __PYRAMID_LEVELS],
    'sizes': [2 ** (x + 2) for x in __PYRAMID_LEVELS],
    'scales': np.array([0.5, 2 ** 0, 2 ** (1.0 / 3.0), 2 ** (2.0 / 3.0), 2]),
    'ratios': np.array([0.1, 0.5, 1, 2])
}

CROP_ALL_CLASSES = ['帳票']

SCORE_THRESHOLD = 0.5


# HEALTH MODEL PARAMS #
SUFFIX_LIST = ['', '-p1', '-p2']

GROUP_ID_LIST = ['this_time', 'last_time', 'before_last_time']

EXCLUDE_CLASS = [
    "current",
    "last_1",
    "last_2",
]

TOUGOU = {
    "urine_protein":("urine_protein_v",True),
    "urine_glucose":("urine_glucose_v",True),
    "tumor_afp":("tumor_afp_class",False),
    "liver_antibody_c":("liver_antibody_q",True),
    "liver_antigen":("liver_antigen_q",True),
    "kidney_crp":("sera_crp",False),
    "hpilori_antibody":("hpiloli_class",False),
}

ALL_CLASSES = [
    "weight",
    "weight-p1",
    "weight-p2",
    "waist",
    "waist-p1",
    "waist-p2",
    "vfa",
    "vfa-p1",
    "vfa-p2",
    "vc_rate",
    "vc_rate-p1",
    "vc_rate-p2",
    "vc",
    "vc-p1",
    "vc-p2",
    "urine_white_cell",
    "urine_white_cell-p1",
    "urine_white_cell-p2",
    "urine_urobilinogen",
    "urine_urobilinogen-p1",
    "urine_urobilinogen-p2",
    "urine_trans_epi",
    "urine_trans_epi-p1",
    "urine_trans_epi-p2",
    "urine_red_cell",
    "urine_red_cell-p1",
    "urine_red_cell-p2",
    "urine_protein",
    "urine_protein-p1",
    "urine_protein-p2",
    "urine_protein_v",
    "urine_protein_v-p1",
    "urine_protein_v-p2",
    "urine_ph",
    "urine_ph-p1",
    "urine_ph-p2",
    "urine_ketone",
    "urine_ketone-p1",
    "urine_ketone-p2",
    "urine_hyaline",
    "urine_hyaline-p1",
    "urine_hyaline-p2",
    "urine_gravity",
    "urine_gravity-p1",
    "urine_gravity-p2",
    "urine_granular",
    "urine_granular-p1",
    "urine_granular-p2",
    "urine_glucose",
    "urine_glucose-p1",
    "urine_glucose-p2",
    "urine_glucose_v",
    "urine_glucose_v-p1",
    "urine_glucose_v-p2",
    "urine_epi_cell",
    "urine_epi_cell-p1",
    "urine_epi_cell-p2",
    "urine_epi",
    "urine_epi-p1",
    "urine_epi-p2",
    "urine_cast",
    "urine_cast-p1",
    "urine_cast-p2",
    "urine_blood",
    "urine_blood-p1",
    "urine_blood-p2",
    "urine_bilirubin",
    "urine_bilirubin-p1",
    "urine_bilirubin-p2",
    "urine_bacteria",
    "urine_bacteria-p1",
    "urine_bacteria-p2",
    "urine_albumin_v",
    "urine_albumin_v-p1",
    "urine_albumin_v-p2",
    "urine_albumin_rate",
    "urine_albumin_rate-p1",
    "urine_albumin_rate-p2",
    "urine_albumin1d",
    "urine_albumin1d-p1",
    "urine_albumin1d-p2",
    "uric_acid",
    "uric_acid-p1",
    "uric_acid-p2",
    "uibc",
    "uibc-p1",
    "uibc-p2",
    "tumor_scc",
    "tumor_scc-p1",
    "tumor_scc-p2",
    "tumor_psa",
    "tumor_psa-p1",
    "tumor_psa-p2",
    "tumor_pap",
    "tumor_pap-p1",
    "tumor_pap-p2",
    "tumor_nse",
    "tumor_nse-p1",
    "tumor_nse-p2",
    "tumor_cyfpra",
    "tumor_cyfpra-p1",
    "tumor_cyfpra-p2",
    "tumor_cea",
    "tumor_cea-p1",
    "tumor_cea-p2",
    "tumor_ca199",
    "tumor_ca199-p1",
    "tumor_ca199-p2",
    "tumor_ca153",
    "tumor_ca153-p1",
    "tumor_ca153-p2",
    "tumor_ca125",
    "tumor_ca125-p1",
    "tumor_ca125-p2",
    "tumor_afp_class",
    "tumor_afp_class-p1",
    "tumor_afp_class-p2",
    "tumor_afp",
    "tumor_afp-p1",
    "tumor_afp-p2",
    "tubular_epi",
    "tubular_epi-p1",
    "tubular_epi-p2",
    "tsh",
    "tsh-p1",
    "tsh-p2",
    "total_diagnosis",
    "total_diagnosis-p1",
    "total_diagnosis-p2",
    "tibc",
    "tibc-p1",
    "tibc-p2",
    "stomach_xray",
    "stomach_xray-p1",
    "stomach_xray-p2",
    "egd",
    "egd-p1",
    "egd-p2",
    "stomach_echo",
    "stomach_echo-p1",
    "stomach_echo-p2",
    "hypogastric_echo",
    "hypogastric_echo-p1",
    "hypogastric_echo-p2",
    "std_weight",
    "std_weight-p1",
    "std_weight-p2",
    "sputum_cytology",
    "sputum_cytology-p1",
    "sputum_cytology-p2",
    "sera_tpha",
    "sera_tpha-p1",
    "sera_tpha-p2",
    "sera_sts",
    "sera_sts-p1",
    "sera_sts-p2",
    "sera_rpr",
    "sera_rpr-p1",
    "sera_rpr-p2",
    "sera_rf",
    "sera_rf-p1",
    "sera_rf-p2",
    "sera_ra",
    "sera_ra-p1",
    "sera_ra-p2",
    "sera_glass_test",
    "sera_glass_test-p1",
    "sera_glass_test-p2",
    "sera_ferritin",
    "sera_ferritin-p1",
    "sera_ferritin-p2",
    "sera_esr_1",
    "sera_esr_1-p1",
    "sera_esr_1-p2",
    "sera_esr_2",
    "sera_esr_2-p1",
    "sera_esr_2-p2",
    "sera_cpk",
    "sera_cpk-p1",
    "sera_cpk-p2",
    "sera_aso",
    "sera_aso-p1",
    "sera_aso-p2",
    "sera_aggregation",
    "sera_aggregation-p1",
    "sera_aggregation-p2",
    "rectal_exam",
    "rectal_exam-p1",
    "rectal_exam-p2",
    "rational_symptom",
    "rational_symptom-p1",
    "rational_symptom-p2",
    "pvc",
    "pvc-p1",
    "pvc-p2",
    "pulse_wave_count",
    "pulse_wave_count-p1",
    "pulse_wave_count-p2",
    "prostate_exam",
    "prostate_exam-p1",
    "prostate_exam-p2",
    "prostate_echo",
    "prostate_echo-p1",
    "prostate_echo-p2",
    "ponderal_index",
    "ponderal_index-p1",
    "ponderal_index-p2",
    "pg2",
    "pg2-p1",
    "pg2-p2",
    "pg2_d",
    "pg2_d-p1",
    "pg2_d-p2",
    "pg1",
    "pg1-p1",
    "pg1-p2",
    "pef",
    "pef-p1",
    "pef-p2",
    "pancreas_amylase",
    "pancreas_amylase-p1",
    "pancreas_amylase-p2",
    "objective_symptom",
    "objective_symptom-p1",
    "objective_symptom-p2",
    "ntpro_bnp",
    "ntpro_bnp-p1",
    "ntpro_bnp-p2",
    "metabo_triglyceride",
    "metabo_triglyceride-p1",
    "metabo_triglyceride-p2",
    "metabo_tcholesterol",
    "metabo_tcholesterol-p1",
    "metabo_tcholesterol-p2",
    "metabo_nhdl",
    "metabo_nhdl-p1",
    "metabo_nhdl-p2",
    "metabo_ldl",
    "metabo_ldl-p1",
    "metabo_ldl-p2",
    "metabo_hdl",
    "metabo_hdl-p1",
    "metabo_hdl-p2",
    "metabo_blipo",
    "metabo_blipo-p1",
    "metabo_blipo-p2",
    "medical_history",
    "medical_history-p1",
    "medical_history-p2",
    "medical_finding",
    "medical_finding-p1",
    "medical_finding-p2",
    "liver_ztt",
    "liver_ztt-p1",
    "liver_ztt-p2",
    "liver_ttt",
    "liver_ttt-p1",
    "liver_ttt-p2",
    "liver_tp",
    "liver_tp-p1",
    "liver_tp-p2",
    "liver_ldh",
    "liver_ldh-p1",
    "liver_ldh-p2",
    "liver_lap",
    "liver_lap-p1",
    "liver_lap-p2",
    "liver_antibody_c",
    "liver_antibody_c-p1",
    "liver_antibody_c-p2",
    "liver_antibody_q",
    "liver_antibody_q-p1",
    "liver_antibody_q-p2",
    "liver_antigen",
    "liver_antigen-p1",
    "liver_antigen-p2",
    "liver_antibody",
    "liver_antibody-p1",
    "liver_antibody-p2",
    "liver_antigen_q",
    "liver_antigen_q-p1",
    "liver_antigen_q-p2",
    "liver_ggtp",
    "liver_ggtp-p1",
    "liver_ggtp-p2",
    "liver_che_ul",
    "liver_che_ul-p1",
    "liver_che_ul-p2",
    "liver_che_iul",
    "liver_che_iul-p1",
    "liver_che_iul-p2",
    "liver_tbil",
    "liver_tbil-p1",
    "liver_tbil-p2",
    "liver_dbil",
    "liver_dbil-p1",
    "liver_dbil-p2",
    "liver_ibil",
    "liver_ibil-p1",
    "liver_ibil-p2",
    "liver_ibil_d",
    "liver_ibil_d-p1",
    "liver_ibil_d-p2",
    "liver_ast",
    "liver_ast-p1",
    "liver_ast-p2",
    "liver_antibody_a",
    "liver_antibody_a-p1",
    "liver_antibody_a-p2",
    "liver_alt",
    "liver_alt-p1",
    "liver_alt-p2",
    "liver_alp",
    "liver_alp-p1",
    "liver_alp-p2",
    "liver_albumin",
    "liver_albumin-p1",
    "liver_albumin-p2",
    "liver_ag",
    "liver_ag-p1",
    "liver_ag-p2",
    "last_2",
    "last_2-p1",
    "last_2-p2",
    "last_1",
    "last_1-p1",
    "last_1-p2",
    "kidney_egfr",
    "kidney_egfr-p1",
    "kidney_egfr-p2",
    "kidney_crp",
    "kidney_crp-p1",
    "kidney_crp-p2",
    "sera_crp",
    "sera_crp-p1",
    "sera_crp-p2",
    "kidney_creatinine",
    "kidney_creatinine-p1",
    "kidney_creatinine-p2",
    "kidney_bun",
    "kidney_bun-p1",
    "kidney_bun-p2",
    "job_history",
    "job_history-p1",
    "job_history-p2",
    "iop_r",
    "iop_r-p1",
    "iop_r-p2",
    "iop_l",
    "iop_l-p1",
    "iop_l-p2",
    "institution_name",
    "institution_name-p1",
    "institution_name-p2",
    "inorganic_phosphorus",
    "inorganic_phosphorus-p1",
    "inorganic_phosphorus-p2",
    "hpilori_antibody",
    "hpilori_antibody-p1",
    "hpilori_antibody-p2",
    "hpiloli_class",
    "hpiloli_class-p1",
    "hpiloli_class-p2",
    "hemoto_platelet",
    "hemoto_platelet-p1",
    "hemoto_platelet-p2",
    "hemato_wbc",
    "hemato_wbc-p1",
    "hemato_wbc-p2",
    "hemato_stab",
    "hemato_stab-p1",
    "hemato_stab-p2",
    "hemato_seg",
    "hemato_seg-p1",
    "hemato_seg-p2",
    "hemato_rbc",
    "hemato_rbc-p1",
    "hemato_rbc-p2",
    "hemato_neutrophil",
    "hemato_neutrophil-p1",
    "hemato_neutrophil-p2",
    "hemato_monocyte",
    "hemato_monocyte-p1",
    "hemato_monocyte-p2",
    "hemato_mcv",
    "hemato_mcv-p1",
    "hemato_mcv-p2",
    "hemato_mchc",
    "hemato_mchc-p1",
    "hemato_mchc-p2",
    "hemato_mch",
    "hemato_mch-p1",
    "hemato_mch-p2",
    "hemato_lymphocyte",
    "hemato_lymphocyte-p1",
    "hemato_lymphocyte-p2",
    "hemato_hemoglobin",
    "hemato_hemoglobin-p1",
    "hemato_hemoglobin-p2",
    "hemato_hematocrit",
    "hemato_hematocrit-p1",
    "hemato_hematocrit-p2",
    "hemato_fe",
    "hemato_fe-p1",
    "hemato_fe-p2",
    "hemato_eosinocyte",
    "hemato_eosinocyte-p1",
    "hemato_eosinocyte-p2",
    "hemato_bosocyte",
    "hemato_bosocyte-p1",
    "hemato_bosocyte-p2",
    "height",
    "height-p1",
    "height-p2",
    "hearing_r",
    "hearing_r-p1",
    "hearing_r-p2",
    "hearing_l",
    "hearing_l-p1",
    "hearing_l-p2",
    "hearing_1000_r",
    "hearing_1000_r-p1",
    "hearing_1000_r-p2",
    "hearing_1000_l",
    "hearing_1000_l-p1",
    "hearing_1000_l-p2",
    "hearing_4000_r",
    "hearing_4000_r-p1",
    "hearing_4000_r-p2",
    "hearing_4000_l",
    "hearing_4000_l-p1",
    "hearing_4000_l-p2",
    "hearing_250_r",
    "hearing_250_r-p1",
    "hearing_250_r-p2",
    "hearing_8000_r",
    "hearing_8000_r-p1",
    "hearing_8000_r-p2",
    "hearing_250_l",
    "hearing_250_l-p1",
    "hearing_250_l-p2",
    "hearing_8000_l",
    "hearing_8000_l-p1",
    "hearing_8000_l-p2",
    "gp_class",
    "gp_class-p1",
    "gp_class-p2",
    "gg_fraction",
    "gg_fraction-p1",
    "gg_fraction-p2",
    "ft4",
    "ft4-p1",
    "ft4-p2",
    "ft3",
    "ft3-p1",
    "ft3-p2",
    "fev1_rate_rate",
    "fev1_rate_rate-p1",
    "fev1_rate_rate-p2",
    "fev1_rate",
    "fev1_rate-p1",
    "fev1_rate-p2",
    "fev1",
    "fev1-p1",
    "fev1-p2",
    "fev_rate",
    "fev_rate-p1",
    "fev_rate-p2",
    "fev",
    "fev-p1",
    "fev-p2",
    "fecal_blood_1",
    "fecal_blood_1-p1",
    "fecal_blood_1-p2",
    "fecal_blood_2",
    "fecal_blood_2-p1",
    "fecal_blood_2-p2",
    "fat_ratio",
    "fat_ratio-p1",
    "fat_ratio-p2",
    "kw_r",
    "kw_r-p1",
    "kw_r-p2",
    "kw_fr",
    "kw_fr-p1",
    "kw_fr-p2",
    "kw_l",
    "kw_l-p1",
    "kw_l-p2",
    "kw_fl",
    "kw_fl-p1",
    "kw_fl-p2",
    "scheie_h_r",
    "scheie_h_r-p1",
    "scheie_h_r-p2",
    "scheie_h_fr",
    "scheie_h_fr-p1",
    "scheie_h_fr-p2",
    "scheie_h_l",
    "scheie_h_l-p1",
    "scheie_h_l-p2",
    "scheie_h_fl",
    "scheie_h_fl-p1",
    "scheie_h_fl-p2",
    "scheie_s_r",
    "scheie_s_r-p1",
    "scheie_s_r-p2",
    "scheie_s_fr",
    "scheie_s_fr-p1",
    "scheie_s_fr-p2",
    "scheie_s_l",
    "scheie_s_l-p1",
    "scheie_s_l-p2",
    "scheie_s_fl",
    "scheie_s_fl-p1",
    "scheie_s_fl-p2",
    "scott_r",
    "scott_r-p1",
    "scott_r-p2",
    "scott_fr",
    "scott_fr-p1",
    "scott_fr-p2",
    "scott_l",
    "scott_l-p1",
    "scott_l-p2",
    "scott_fl",
    "scott_fl-p1",
    "scott_fl-p2",
    "wm_r",
    "wm_r-p1",
    "wm_r-p2",
    "wm_fr",
    "wm_fr-p1",
    "wm_fr-p2",
    "wm_l",
    "wm_l-p1",
    "wm_l-p2",
    "wm_fl",
    "wm_fl-p1",
    "wm_fl-p2",
    "davis_r",
    "davis_r-p1",
    "davis_r-p2",
    "davis_fr",
    "davis_fr-p1",
    "davis_fr-p2",
    "davis_l",
    "davis_l-p1",
    "davis_l-p2",
    "davis_fl",
    "davis_fl-p1",
    "davis_fl-p2",
    "eyeground_fr",
    "eyeground_fr-p1",
    "eyeground_fr-p2",
    "eyeground_fl",
    "eyeground_fl-p1",
    "eyeground_fl-p2",
    "eye_sight_r",
    "eye_sight_r-p1",
    "eye_sight_r-p2",
    "eye_sight_l",
    "eye_sight_l-p1",
    "eye_sight_l-p2",
    "eye_sight_cr",
    "eye_sight_cr-p1",
    "eye_sight_cr-p2",
    "eye_sight_cl",
    "eye_sight_cl-p1",
    "eye_sight_cl-p2",
    "exmaminee_dob",
    "exmaminee_dob-p1",
    "exmaminee_dob-p2",
    "examinee_name_kana",
    "examinee_name_kana-p1",
    "examinee_name_kana-p2",
    "examinee_name",
    "examinee_name-p1",
    "examinee_name-p2",
    "examinee_gender",
    "examinee_gender-p1",
    "examinee_gender-p2",
    "exam_date",
    "exam_date-p1",
    "exam_date-p2",
    "epi_cast",
    "epi_cast-p1",
    "epi_cast-p2",
    "electro_na",
    "electro_na-p1",
    "electro_na-p2",
    "electro_k",
    "electro_k-p1",
    "electro_k-p2",
    "electro_cl",
    "electro_cl-p1",
    "electro_cl-p2",
    "electro_ca",
    "electro_ca-p1",
    "electro_ca-p2",
    "echocardiogram",
    "echocardiogram-p1",
    "echocardiogram-p2",
    "ecg_rest",
    "ecg_rest-p1",
    "ecg_rest-p2",
    "ecg_load",
    "ecg_load-p1",
    "ecg_load-p2",
    "ecg_holter",
    "ecg_holter-p1",
    "ecg_holter-p2",
    "doctor_name",
    "doctor_name-p1",
    "doctor_name-p2",
    "diabetic_insulin",
    "diabetic_insulin-p1",
    "diabetic_insulin-p2",
    "diabetic_homar",
    "diabetic_homar-p1",
    "diabetic_homar-p2",
    "diabetic_hba1c_jds",
    "diabetic_hba1c_jds-p1",
    "diabetic_hba1c_jds-p2",
    "diabetic_hba1c_ngsp",
    "diabetic_hba1c_ngsp-p1",
    "diabetic_hba1c_ngsp-p2",
    "diabetic_fructosamine",
    "diabetic_fructosamine-p1",
    "diabetic_fructosamine-p2",
    "diabetic_fbg",
    "diabetic_fbg-p1",
    "diabetic_fbg-p2",
    "diabetic_cbg",
    "diabetic_cbg-p1",
    "diabetic_cbg-p2",
    "blood_sugar_0",
    "blood_sugar_0-p1",
    "blood_sugar_0-p2",
    "blood_sugar_1",
    "blood_sugar_1-p1",
    "blood_sugar_1-p2",
    "blood_sugar_2",
    "blood_sugar_2-p1",
    "blood_sugar_2-p2",
    "current",
    "current-p1",
    "current-p2",
    "course_name",
    "course_name-p1",
    "course_name-p2",
    "consul_1",
    "consul_1-p1",
    "consul_1-p2",
    "consul_2",
    "consul_2-p1",
    "consul_2-p2",
    "consul_3",
    "consul_3-p1",
    "consul_3-p2",
    "consul_4",
    "consul_4-p1",
    "consul_4-p2",
    "consul_5",
    "consul_5-p1",
    "consul_5-p2",
    "consul_6",
    "consul_6-p1",
    "consul_6-p2",
    "consul_7",
    "consul_7-p1",
    "consul_7-p2",
    "consul_8",
    "consul_8-p1",
    "consul_8-p2",
    "consul_9",
    "consul_9-p1",
    "consul_9-p2",
    "consul_10",
    "consul_10-p1",
    "consul_10-p2",
    "consul_11",
    "consul_11-p1",
    "consul_11-p2",
    "consul_12",
    "consul_12-p1",
    "consul_12-p2",
    "consul_13",
    "consul_13-p1",
    "consul_13-p2",
    "consul_14",
    "consul_14-p1",
    "consul_14-p2",
    "consul_15",
    "consul_15-p1",
    "consul_15-p2",
    "consul_16",
    "consul_16-p1",
    "consul_16-p2",
    "consul_17",
    "consul_17-p1",
    "consul_17-p2",
    "consul_18",
    "consul_18-p1",
    "consul_18-p2",
    "consul_19",
    "consul_19-p1",
    "consul_19-p2",
    "consul_20",
    "consul_20-p1",
    "consul_20-p2",
    "consul_21",
    "consul_21-p1",
    "consul_21-p2",
    "consul_22",
    "consul_22-p1",
    "consul_22-p2",
    "consul_metabo",
    "consul_metabo-p1",
    "consul_metabo-p2",
    "consul_weight",
    "consul_weight-p1",
    "consul_weight-p2",
    "consul_dental",
    "consul_dental-p1",
    "consul_dental-p2",
    "colonoscope",
    "colonoscope-p1",
    "colonoscope-p2",
    "chest_xray",
    "chest_xray-p1",
    "chest_xray-p2",
    "chest_ct",
    "chest_ct-p1",
    "chest_ct-p2",
    "cervical_class",
    "cervical_class-p1",
    "cervical_class-p2",
    "cervical_class_f",
    "cervical_class_f-p1",
    "cervical_class_f-p2",
    "cervical_bethesda",
    "cervical_bethesda-p1",
    "cervical_bethesda-p2",
    "cervical_bethesda_f",
    "cervical_bethesda_f-p1",
    "cervical_bethesda_f-p2",
    "uterine_corpus",
    "uterine_corpus-p1",
    "uterine_corpus-p2",
    "cervical_cytology",
    "cervical_cytology-p1",
    "cervical_cytology-p2",
    "gynecology_echo",
    "gynecology_echo-p1",
    "gynecology_echo-p2",
    "gynecology_exam",
    "gynecology_exam-p1",
    "gynecology_exam-p2",
    "certificate_number",
    "certificate_number-p1",
    "certificate_number-p2",
    "celebral_mri",
    "celebral_mri-p1",
    "celebral_mri-p2",
    "celebral_mra",
    "celebral_mra-p1",
    "celebral_mra-p2",
    "celebral_other",
    "celebral_other-p1",
    "celebral_other-p2",
    "cavi",
    "cavi-p1",
    "cavi-p2",
    "card_sign",
    "card_sign-p1",
    "card_sign-p2",
    "card_number",
    "card_number-p1",
    "card_number-p2",
    "calcium_exalate",
    "calcium_exalate-p1",
    "calcium_exalate-p2",
    "btype_abo",
    "btype_abo-p1",
    "btype_abo-p2",
    "btype_rh",
    "btype_rh-p1",
    "btype_rh-p2",
    "breast_exam",
    "breast_exam-p1",
    "breast_exam-p2",
    "breast_echo",
    "breast_echo-p1",
    "breast_echo-p2",
    "mammography",
    "mammography-p1",
    "mammography-p2",
    "mammography_r",
    "mammography_r-p1",
    "mammography_r-p2",
    "mammography_l",
    "mammography_l-p1",
    "mammography_l-p2",
    "breast_finding",
    "breast_finding-p1",
    "breast_finding-p2",
    "bone_density",
    "bone_density-p1",
    "bone_density-p2",
    "bmi",
    "bmi-p1",
    "bmi-p2",
    "bp_systolic",
    "bp_systolic-p1",
    "bp_systolic-p2",
    "bp_diastolic",
    "bp_diastolic-p1",
    "bp_diastolic-p2",
    "bp_systolic_2",
    "bp_systolic_2-p1",
    "bp_systolic_2-p2",
    "bp_diastolic_2",
    "bp_diastolic_2-p1",
    "bp_diastolic_2-p2",
    "bg_fraction",
    "bg_fraction-p1",
    "bg_fraction-p2",
    "bapwv",
    "bapwv-p1",
    "bapwv-p2",
    "arteria_echo",
    "arteria_echo-p1",
    "arteria_echo-p2",
    "alb_fraction",
    "alb_fraction-p1",
    "alb_fraction-p2",
    "a2g_fraction",
    "a2g_fraction-p1",
    "a2g_fraction-p2",
    "a1g_fraction",
    "a1g_fraction-p1",
    "a1g_fraction-p2",
]

WHITE_LIST = [_cls for _cls in ALL_CLASSES if not (_cls in EXCLUDE_CLASS)]

def _get_max_counts():
    dst = {clz: 1 for clz in ALL_CLASSES}

    # X線系など、複数個にばらしたやつ
    # 既往歴など、別名で複数箇所に分かれて描かれるやつ
    multi_list = ['rational_symptom', 'medical_history', 'stomach_echo',
                    'egd', 'stomach_xray', 'chest_xray', 'chest_ct',]# 'gynecology_echo']
    # 問題になったものだけとりあえず追加したが、低い頻度で2個以上になる項目もある

    for item in multi_list:
        dst[item] = 10
        dst[item+'-p1'] = 10
        dst[item+'-p2'] = 10

    # クラス統合したものは、統合前後で2件出る可能性があるため
    # 複数OKとする
    for item in TOUGOU:
        dst[item] = 2
        dst[item+'-p1'] = 2
        dst[item+'-p2'] = 2

    # 定量,定性の区別がないが、両方記載される可能性がある
    both_list = ['sera_rf']
    for item in both_list:
        dst[item] = 2
        dst[item+'-p1'] = 2
        dst[item+'-p2'] = 2

    return dst

MAX_COUNTS = _get_max_counts()

CONSUL_CNAMES = ['consul_{}'.format(ii) for ii in range(1, 23)]
QUALITATIVE_CNAMES = [
    "urine_protein",
    "urine_glucose",
    "urine_blood",
    "urine_urobilinogen",
    "urine_bilirubin",
    "urine_ketone",
    "urine_sediment_class",
    "urine_bacteria",
    "liver_antigen",
    "liver_antibody",
    "liver_antibody_c",
    "liver_antibody_a",
    "sera_crp",
    "sera_ra",
    "sera_rf",
    "sera_tpha",
    "sera_rpr",
    "sera_aggregation",
    "tumor_afp_class",
    "tumor_pap",
    "fecal_blood_1",
    "fecal_blood_2",
    "gp_class",
    "hpiloli_class",
    "sera_sts",
    "btype_rh",]

EYEGROUND_CNAMES = [
    "kw_r",
    "kw_l",
    "scheie_h_r",
    "scheie_h_l",
    "scheie_s_r",
    "scheie_s_l",
    "scott_r",
    "scott_l",
    "wm_r",
    "wm_l",
    "davis_r",
    "davis_l",
]

QUANTATIVE_CNAMES = [
    "card_sign",
    "card_number",
    "bp_systolic",
    "bp_diastolic",
    "bp_systolic_2",
    "bp_diastolic_2",
    "liver_che_ul",
    "liver_che_iul",
    "std_weight",
    "pg1",
    "liver_ldh",
    "diabetic_fbg",
    "eye_sight_cr",
    "eye_sight_cl",
    "eye_sight_r",
    "eye_sight_l"
]